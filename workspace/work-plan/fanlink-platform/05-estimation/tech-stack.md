# FanLink - 기술 스택 추천

## 1. 기술 스택 선정 원칙

### 1.1 MVP 단계 원칙

> **"Make vs Buy → Buy 우선"**
>
> MVP 단계에서는 빠른 검증이 최우선이므로, 직접 구축보다 검증된 서비스와 프레임워크를 적극 활용합니다.

### 1.2 선정 기준

| 기준 | 가중치 | 설명 |
|------|--------|------|
| **개발 속도** | 30% | 12주 내 MVP 출시 가능 |
| **확장성** | 25% | 향후 성장에 대응 가능 |
| **비용 효율** | 20% | 초기 비용 최소화 |
| **팀 친숙도** | 15% | 학습 비용 최소화 |
| **생태계** | 10% | 커뮤니티, 문서, 라이브러리 |

---

## 2. 권장 기술 스택

### 2.1 스택 개요

```
┌─────────────────────────────────────────────────────────────────┐
│                    FanLink 기술 스택                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                      Frontend                            │  │
│   │   Next.js 15 + TypeScript + Tailwind CSS + shadcn/ui    │  │
│   └─────────────────────────────────────────────────────────┘  │
│                              │                                  │
│                              ▼                                  │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                      Backend                             │  │
│   │            Supabase (PostgreSQL + Auth + Storage)        │  │
│   │            + Edge Functions (Deno)                       │  │
│   └─────────────────────────────────────────────────────────┘  │
│                              │                                  │
│                              ▼                                  │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                    Infrastructure                        │  │
│   │        Vercel (Hosting) + Supabase (DBaaS)              │  │
│   └─────────────────────────────────────────────────────────┘  │
│                              │                                  │
│                              ▼                                  │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                    Third-party                           │  │
│   │    토스페이먼츠 (결제) + Mixpanel (분석) + Resend (이메일)│  │
│   └─────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 스택 상세

| 영역 | 기술 | 버전 | 선정 이유 |
|------|------|------|----------|
| **Framework** | Next.js | 15 | App Router, SSR, 빠른 개발 |
| **Language** | TypeScript | 5.x | 타입 안정성, DX 향상 |
| **Styling** | Tailwind CSS | 3.x | 유틸리티 기반, 빠른 스타일링 |
| **UI Components** | shadcn/ui | latest | 커스터마이징 용이, 접근성 |
| **State** | Zustand | 5.x | 심플, 보일러플레이트 최소화 |
| **Backend** | Supabase | - | BaaS, Auth/DB/Storage 통합 |
| **Database** | PostgreSQL | 15 | 관계형, Supabase 내장 |
| **Auth** | Supabase Auth | - | 소셜 로그인 내장 |
| **Storage** | Supabase Storage | - | 이미지/영상 저장 |
| **Edge Functions** | Deno | - | 서버리스 로직 |
| **Hosting** | Vercel | - | Next.js 최적화, Edge |
| **Payment** | 토스페이먼츠 | - | 한국 결제, 정기결제 지원 |
| **Analytics** | Mixpanel | - | 이벤트 기반 분석 |
| **Email** | Resend | - | 개발자 친화적, 저렴 |
| **Error Tracking** | Sentry | - | 에러 모니터링 |

---

## 3. 영역별 상세

### 3.1 Frontend

```
┌─────────────────────────────────────────────────────────────────┐
│                      Frontend Stack                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Core Framework                                                │
│   ─────────────────────────────────────────────────────         │
│   • Next.js 15 (App Router)                                    │
│     - Server Components로 초기 로딩 최적화                      │
│     - Route Handlers로 API 구현                                │
│     - Middleware로 인증 처리                                   │
│                                                                 │
│   Styling                                                       │
│   ─────────────────────────────────────────────────────         │
│   • Tailwind CSS 3.x                                           │
│     - 유틸리티 기반 빠른 스타일링                              │
│   • shadcn/ui                                                  │
│     - 접근성 고려된 컴포넌트                                   │
│     - 커스터마이징 자유도                                      │
│   • Lucide React (아이콘)                                      │
│                                                                 │
│   State Management                                              │
│   ─────────────────────────────────────────────────────         │
│   • Zustand (클라이언트 상태)                                  │
│   • TanStack Query (서버 상태, 캐싱)                           │
│                                                                 │
│   Forms & Validation                                            │
│   ─────────────────────────────────────────────────────         │
│   • React Hook Form + Zod                                      │
│                                                                 │
│   Other Libraries                                               │
│   ─────────────────────────────────────────────────────         │
│   • date-fns (날짜 처리)                                       │
│   • recharts (차트, 대시보드용)                                │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 Backend (Supabase)

```
┌─────────────────────────────────────────────────────────────────┐
│                      Backend Stack                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   Supabase 활용 영역                                            │
│   ─────────────────────────────────────────────────────         │
│                                                                 │
│   1. PostgreSQL Database                                       │
│      • 모든 데이터 저장                                        │
│      • Row Level Security (RLS)로 권한 관리                    │
│      • 실시간 구독 (Realtime)                                  │
│                                                                 │
│   2. Authentication                                            │
│      • 소셜 로그인 (Google, Kakao)                             │
│      • 이메일/비밀번호 로그인                                  │
│      • JWT 토큰 관리                                           │
│                                                                 │
│   3. Storage                                                   │
│      • 프로필 이미지                                           │
│      • 콘텐츠 이미지/영상                                      │
│      • 버킷별 접근 권한 설정                                   │
│                                                                 │
│   4. Edge Functions (Deno)                                     │
│      • 복잡한 비즈니스 로직                                    │
│      • 웹훅 처리                                               │
│      • 정기 결제 처리                                          │
│                                                                 │
│   RLS 정책 예시                                                 │
│   ─────────────────────────────────────────────────────         │
│   • 콘텐츠: 크리에이터만 CUD, 구독자만 R                       │
│   • 프로필: 본인만 U, 모두 R                                   │
│   • 구독: 본인만 RU                                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.3 결제 (토스페이먼츠)

```
┌─────────────────────────────────────────────────────────────────┐
│                      결제 시스템                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   토스페이먼츠 선정 이유                                        │
│   ─────────────────────────────────────────────────────         │
│   • 정기결제(빌링) 지원                                        │
│   • 개발자 친화적 API/SDK                                      │
│   • 합리적 수수료 (2.9%+)                                      │
│   • 카카오페이/네이버페이 연동                                 │
│                                                                 │
│   결제 플로우                                                   │
│   ─────────────────────────────────────────────────────         │
│                                                                 │
│   [팬]                                                         │
│     │                                                          │
│     ▼                                                          │
│   구독 버튼 클릭                                                │
│     │                                                          │
│     ▼                                                          │
│   토스페이먼츠 결제창 (카드/간편결제)                           │
│     │                                                          │
│     ▼                                                          │
│   결제 승인 → 웹훅 → Edge Function                             │
│     │                                                          │
│     ▼                                                          │
│   구독 생성 + 빌링키 저장                                       │
│     │                                                          │
│     ▼                                                          │
│   매월 자동 결제 (빌링키 사용)                                  │
│                                                                 │
│   정산 플로우                                                   │
│   ─────────────────────────────────────────────────────         │
│   • 결제 → 플랫폼 계좌 입금                                    │
│   • 월 정산 → 크리에이터 계좌 이체 (수동/자동)                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.4 분석 (Mixpanel)

| 용도 | 이벤트 예시 |
|------|-----------|
| 퍼널 분석 | 가입 → 팔로우 → 구독 전환 |
| 리텐션 | D1/D7/D30 재방문 |
| 기능 사용 | 콘텐츠 조회, 레벨업, 배지 획득 |
| 코호트 | 가입 시기별 행동 분석 |

---

## 4. 인프라 아키텍처

### 4.1 MVP 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                    MVP 인프라 아키텍처                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                         [사용자]                                │
│                            │                                    │
│                            ▼                                    │
│                    ┌───────────────┐                           │
│                    │   Cloudflare  │ (CDN, DDoS 방어)          │
│                    └───────┬───────┘                           │
│                            │                                    │
│                            ▼                                    │
│   ┌────────────────────────────────────────────────────────┐   │
│   │                      Vercel                             │   │
│   │  ┌─────────────────────────────────────────────────┐   │   │
│   │  │              Next.js Application                 │   │   │
│   │  │  • Server Components                             │   │   │
│   │  │  • API Routes (Route Handlers)                   │   │   │
│   │  │  • Middleware (Auth Check)                       │   │   │
│   │  └─────────────────────────────────────────────────┘   │   │
│   └────────────────────────┬───────────────────────────────┘   │
│                            │                                    │
│                            ▼                                    │
│   ┌────────────────────────────────────────────────────────┐   │
│   │                     Supabase                            │   │
│   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐     │   │
│   │  │ PostgreSQL  │  │    Auth     │  │   Storage   │     │   │
│   │  │  Database   │  │             │  │             │     │   │
│   │  └─────────────┘  └─────────────┘  └─────────────┘     │   │
│   │                                                         │   │
│   │  ┌─────────────────────────────────────────────────┐   │   │
│   │  │            Edge Functions (Deno)                 │   │   │
│   │  │  • 결제 웹훅 처리                                │   │   │
│   │  │  • 포인트/레벨 계산                              │   │   │
│   │  │  • 정기 작업 (Cron)                              │   │   │
│   │  └─────────────────────────────────────────────────┘   │   │
│   └────────────────────────────────────────────────────────┘   │
│                            │                                    │
│              ┌─────────────┼─────────────┐                     │
│              │             │             │                      │
│              ▼             ▼             ▼                      │
│      ┌─────────────┐ ┌─────────────┐ ┌─────────────┐          │
│      │ 토스페이먼츠│ │  Mixpanel   │ │   Resend    │          │
│      │   (결제)   │ │   (분석)    │ │   (이메일)  │          │
│      └─────────────┘ └─────────────┘ └─────────────┘          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 확장 시 아키텍처 (v1.5+)

```
┌─────────────────────────────────────────────────────────────────┐
│                    확장 시 아키텍처                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   변경/추가 사항:                                               │
│                                                                 │
│   1. 캐싱 레이어 추가                                          │
│      • Redis (Upstash) - 세션, 인기 콘텐츠 캐싱                │
│                                                                 │
│   2. 미디어 처리                                               │
│      • AWS S3 + CloudFront (대용량 미디어)                     │
│      • 영상 트랜스코딩 서비스                                  │
│                                                                 │
│   3. 검색                                                      │
│      • Algolia 또는 Meilisearch                               │
│                                                                 │
│   4. 푸시 알림                                                 │
│      • Firebase Cloud Messaging                                │
│                                                                 │
│   5. 모니터링 강화                                             │
│      • Datadog 또는 Grafana Cloud                             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. 비용 예측

### 5.1 MVP 단계 월 비용

| 서비스 | 플랜 | 월 비용 | 비고 |
|--------|------|--------|------|
| **Vercel** | Pro | $20 | 팀 기능, 분석 |
| **Supabase** | Pro | $25 | 8GB DB, 250GB Storage |
| **토스페이먼츠** | 종량제 | 결제액 2.9% | 정기결제 |
| **Mixpanel** | Growth | $0-28 | 1M 이벤트/월 무료 |
| **Resend** | 무료/Pro | $0-20 | 3K/월 무료 |
| **Sentry** | Team | $26 | 에러 모니터링 |
| **도메인** | - | $15/년 | .com 기준 |
| **합계** | | **약 $100/월** | (결제 수수료 별도) |

### 5.2 성장 단계 비용 예측

| 단계 | MAU | 월 인프라 비용 | 결제 수수료 |
|------|-----|---------------|-----------|
| MVP | 5,000 | $100 | ~$300 |
| Growth | 50,000 | $300 | ~$3,000 |
| Scale | 300,000 | $1,000 | ~$18,000 |

---

## 6. 대안 기술 비교

### 6.1 Backend 대안

| 옵션 | 장점 | 단점 | 적합도 |
|------|------|------|--------|
| **Supabase** | 통합, 빠른 개발 | 벤더 종속 | **선택** |
| Firebase | 실시간, 모바일 | NoSQL 제약 | 중 |
| 직접 구축 (NestJS) | 유연성 | 개발 시간 | 낮음 |
| Convex | 실시간 특화 | 생태계 작음 | 중 |

### 6.2 결제 대안

| 옵션 | 장점 | 단점 | 적합도 |
|------|------|------|--------|
| **토스페이먼츠** | 개발자 친화, 정기결제 | - | **선택** |
| 아임포트 | 다양한 PG 연동 | 복잡도 | 중 |
| Stripe | 글로벌 | 한국 제한적 | 낮음 |
| 나이스페이 | 안정성 | DX 낮음 | 중 |

---

## 7. 개발 환경

### 7.1 개발 도구

| 도구 | 용도 |
|------|------|
| VS Code | 코드 에디터 |
| pnpm | 패키지 매니저 |
| ESLint + Prettier | 코드 품질 |
| Husky + lint-staged | Git 훅 |
| GitHub | 코드 저장소 |
| GitHub Actions | CI/CD |
| Figma | 디자인 협업 |

### 7.2 브랜치 전략

```
main (프로덕션)
  │
  └── develop (개발)
        │
        ├── feature/auth
        ├── feature/creator
        ├── feature/fan
        └── feature/payment
```

---

## 8. 요약

### 권장 스택 요약

| 영역 | 기술 |
|------|------|
| Frontend | Next.js 15 + TypeScript + Tailwind + shadcn/ui |
| Backend | Supabase (PostgreSQL + Auth + Storage + Edge Functions) |
| Hosting | Vercel |
| Payment | 토스페이먼츠 |
| Analytics | Mixpanel |
| Email | Resend |
| Monitoring | Sentry |

### 선택 근거

1. **개발 속도**: Supabase + Next.js로 12주 내 MVP 출시 가능
2. **확장성**: 검증 후 점진적 확장 가능한 구조
3. **비용 효율**: 초기 월 $100 수준으로 운영 가능
4. **DX (개발자 경험)**: 모던 스택, 좋은 문서화

---

**작성일**: 2026-01-16
**버전**: v1.0
**상태**: 초안 완료

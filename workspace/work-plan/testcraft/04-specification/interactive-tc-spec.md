# Interactive TC Generation Specification

> 대화형 TC 세분화 기능 명세서
> 버전: 1.0
> 작성일: 2026-01-16
> 상태: Draft
> 협업: Claude-Gemini 합의 기반

---

## 1. 개요

### 1.1 기능 목적

사용자와의 단계별 대화(티키타카)를 통해 요구사항을 구체화하고, 맞춤형 테스트케이스를 생성하는 대화형 TC 생성 시스템입니다.

### 1.2 핵심 가치

| 가치 | 설명 |
|-----|------|
| **맞춤화** | 사용자 요구사항에 정확히 부합하는 TC 생성 |
| **투명성** | AI 분석 과정을 사용자가 직접 확인하고 개입 |
| **교육 효과** | 어떤 테스트가 필요한지 자연스럽게 학습 |
| **효율성** | 불필요한 TC 생성 방지, 리뷰 시간 단축 |

---

## 2. 대화형 TC 생성 플로우

### 2.1 전체 플로우 (8단계)

```
┌─────────────────────────────────────────────────────────────────┐
│                  Interactive TC Generation Flow                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Step 1: PRD 업로드                                             │
│     └─ PDF 드래그앤드롭 / 파일 선택                             │
│                    ↓                                            │
│  Step 2: 기능 추출 & 편집                                       │
│     ├─ AI가 핵심 기능 목록 추출                                 │
│     └─ 사용자가 드래그앤드롭으로 편집                           │
│                    ↓                                            │
│  Step 3: 테스트 범위 선택                                       │
│     └─ 기능별 테스트 범위 질문                                  │
│                    ↓                                            │
│  Step 4: 데이터 관점 질문                                       │
│     └─ 테스트 데이터 유형 선택                                  │
│                    ↓                                            │
│  Step 5: 사용자 페르소나 선택                                   │
│     └─ 테스트 대상 사용자 유형 선택                             │
│                    ↓                                            │
│  Step 6: 플랫폼별 상세 옵션                                     │
│     └─ Android/iOS/Web 특화 옵션                               │
│                    ↓                                            │
│  Step 7: TC 생성                                                │
│     └─ 실시간 미리보기 + 생성 진행률                           │
│                    ↓                                            │
│  Step 8: 결과 리뷰 & 수정                                       │
│     └─ 추가 요청 반영, 최종 확정                               │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 3. 단계별 상세 명세

### 3.1 Step 1: PRD 업로드

**기존 기능과 동일** - Feature Spec F-003 참조

---

### 3.2 Step 2: 기능 추출 & 편집

#### User Story

```
AS A QA 엔지니어
I WANT TO AI가 추출한 기능 목록을 직접 편집하여
SO THAT 테스트 대상 범위를 정확하게 정의할 수 있다
```

#### Acceptance Criteria

```gherkin
Feature: 기능 추출 및 편집

  Scenario: AI 기능 추출
    Given PRD가 업로드된 상태에서
    When AI 분석이 완료되면
    Then 추출된 기능 목록이 계층 구조로 표시된다
    And 각 기능에는 Epic > Feature > User Story 위계가 표시된다

  Scenario: 기능 추가
    Given 기능 목록이 표시된 상태에서
    When "기능 추가" 버튼을 클릭하고 이름을 입력하면
    Then 새 기능이 목록에 추가된다

  Scenario: 기능 수정
    Given 기능 목록에서
    When 기능명을 클릭하면
    Then 인라인 편집 모드가 활성화되고
    And 이름을 수정할 수 있다

  Scenario: 기능 삭제
    Given 기능 목록에서
    When 기능의 삭제 버튼을 클릭하면
    Then 해당 기능이 목록에서 제거된다

  Scenario: 기능 순서 변경
    Given 기능 목록에서
    When 기능을 드래그하여 다른 위치에 드롭하면
    Then 기능 순서가 변경된다
    And 하위 항목도 함께 이동한다

  Scenario: 기능 위계 변경
    Given 기능 목록에서
    When 기능을 다른 기능 아래로 드래그하면
    Then 해당 기능의 위계가 변경된다 (Feature → User Story)
```

#### UI 요구사항

| 요소 | 설명 |
|-----|------|
| 기능 트리 | 계층 구조로 기능 표시 (들여쓰기) |
| 드래그 핸들 | 각 항목 왼쪽에 드래그 핸들 아이콘 |
| 인라인 편집 | 클릭 시 텍스트 필드로 변환 |
| 추가 버튼 | 각 레벨별 "+ 추가" 버튼 |
| 삭제 버튼 | 호버 시 휴지통 아이콘 표시 |
| 체크박스 | 테스트 대상 여부 선택 |

#### PRD 분석 시각화 (신규)

```gherkin
Feature: PRD 분석 시각화

  Scenario: 추출 근거 하이라이팅
    Given 기능 목록이 표시된 상태에서
    When 특정 기능을 클릭하면
    Then 우측 PRD 미리보기에서 해당 기능의 추출 근거가 하이라이트된다
    And 관련 텍스트가 노란색 배경으로 강조된다

  Scenario: PRD 원문 보기
    Given 기능 목록 옆에
    Then PRD 원문 미리보기 패널이 표시되고
    And 스크롤하여 전체 내용을 확인할 수 있다
```

---

### 3.3 Step 3: 테스트 범위 선택

#### User Story

```
AS A QA 엔지니어
I WANT TO 각 기능별로 테스트 범위를 선택하여
SO THAT 필요한 테스트 유형만 포함된 TC를 받을 수 있다
```

#### Acceptance Criteria

```gherkin
Feature: 테스트 범위 선택

  Scenario: 기능별 테스트 범위 질문
    Given 기능 목록 확정 후
    When 테스트 범위 선택 단계에 진입하면
    Then 각 기능에 대해 테스트 범위 옵션이 표시된다

  Scenario: 범위 옵션 선택
    Given "로그인" 기능에 대한 테스트 범위 질문에서
    When 다음 옵션 중 선택할 수 있다:
      | 옵션 | 설명 |
      | 정상 시나리오 | Happy Path 테스트 |
      | 에러 케이스 | 오류 상황 테스트 |
      | 성능 테스트 | 응답 시간, 동시 접속 |
      | 보안 테스트 | 인증, 권한, 취약점 |
    Then 선택된 옵션에 해당하는 TC만 생성된다

  Scenario: 일괄 적용
    Given 테스트 범위 선택 화면에서
    When "모든 기능에 적용" 체크박스를 선택하면
    Then 동일한 범위 설정이 모든 기능에 적용된다
```

#### 테스트 범위 옵션 상세

| 옵션 | 포함 TC 유형 | 예시 |
|-----|-------------|------|
| **정상 시나리오** | Happy Path | 유효한 정보로 로그인 성공 |
| **에러 케이스** | 예외 처리 | 잘못된 비밀번호 입력 시 오류 메시지 |
| **성능 테스트** | 응답/부하 | 1000명 동시 로그인 시 응답 시간 |
| **보안 테스트** | 인증/취약점 | SQL Injection 시도 시 차단 |

---

### 3.4 Step 4: 데이터 관점 질문 (신규)

#### User Story

```
AS A QA 엔지니어
I WANT TO 테스트에 사용할 데이터 유형을 선택하여
SO THAT 다양한 입력 상황에 대한 TC를 체계적으로 생성할 수 있다
```

#### Acceptance Criteria

```gherkin
Feature: 데이터 관점 질문

  Scenario: 데이터 유형 선택
    Given 테스트 범위 선택 후
    When 데이터 관점 질문 단계에 진입하면
    Then 각 기능에 대해 데이터 유형 옵션이 표시된다

  Scenario: 데이터 유형 옵션
    Given "회원가입" 기능에 대한 데이터 질문에서
    When 다음 옵션 중 선택할 수 있다:
      | 옵션 | 설명 |
      | 정상 데이터 | 유효한 형식의 입력값 |
      | 비정상/예외 데이터 | 잘못된 형식, 특수문자, SQL Injection |
      | 경계값 데이터 | 최소/최대 길이, 0, 음수 |
      | 빈 데이터 | null, 빈 문자열, 공백만 |
    Then 선택된 데이터 유형에 해당하는 TC가 생성된다
```

#### 데이터 유형별 자동 생성 TC

| 데이터 유형 | 자동 생성 TC 예시 |
|-----------|------------------|
| **정상 데이터** | 유효한 이메일 형식(user@example.com)으로 가입 |
| **비정상 데이터** | 이메일 형식 오류(user@), SQL Injection('; DROP TABLE) |
| **경계값 데이터** | 비밀번호 7자(최소-1), 8자(최소), 20자(최대), 21자(최대+1) |
| **빈 데이터** | 이메일 미입력, 비밀번호 공백만 입력 |

---

### 3.5 Step 5: 사용자 페르소나 선택 (신규)

#### User Story

```
AS A QA 엔지니어
I WANT TO 테스트 대상 사용자 유형을 선택하여
SO THAT 특정 사용자 관점의 시나리오를 포함한 TC를 생성할 수 있다
```

#### Acceptance Criteria

```gherkin
Feature: 사용자 페르소나 선택

  Scenario: 페르소나 선택
    Given 데이터 관점 질문 후
    When 사용자 페르소나 선택 단계에 진입하면
    Then 다음 페르소나 옵션이 표시된다:
      | 페르소나 | 테스트 초점 |
      | 신규 사용자 | 온보딩, 튜토리얼, 첫 사용 경험 |
      | 일반 사용자 | 핵심 기능, 일상적 사용 패턴 |
      | 파워 사용자 | 고급 기능, 단축키, 대량 작업 |
      | 관리자 | 어드민 기능, 권한 관리, 설정 |

  Scenario: 복수 페르소나 선택
    Given 페르소나 선택 화면에서
    When 여러 페르소나를 선택하면
    Then 각 페르소나별 특화 TC가 모두 생성된다
```

---

### 3.6 Step 6: 플랫폼별 상세 옵션

**기존 기능 확장** - Feature Spec F-004 참조

추가 옵션:
- 접근성 테스트 포함 여부
- 다국어 테스트 포함 여부
- 오프라인 모드 테스트 포함 여부

---

### 3.7 Step 7: TC 생성 (실시간 미리보기)

#### User Story

```
AS A QA 엔지니어
I WANT TO TC 생성 과정을 실시간으로 확인하여
SO THAT 진행 상황을 파악하고 결과를 예측할 수 있다
```

#### Acceptance Criteria

```gherkin
Feature: TC 생성 실시간 미리보기

  Scenario: 예상 TC 개수 표시
    Given 모든 옵션 선택이 완료된 상태에서
    Then 예상 생성 TC 개수가 실시간으로 표시된다
    And 카테고리별 TC 개수 분포가 표시된다

  Scenario: 생성 진행률 표시
    Given "생성 시작" 버튼을 클릭하면
    Then 다음 정보가 실시간으로 업데이트된다:
      - 전체 진행률 (%)
      - 현재 처리 중인 기능명
      - 생성된 TC 개수
      - 예상 완료 시간

  Scenario: 생성 중 TC 미리보기
    Given TC 생성이 진행 중일 때
    Then 생성된 TC가 실시간으로 목록에 추가된다
    And 각 TC의 요약 정보가 표시된다
```

---

### 3.8 Step 8: 결과 리뷰 & 수정

#### User Story

```
AS A QA 엔지니어
I WANT TO 생성된 TC를 리뷰하고 추가 요청을 하여
SO THAT 최종 TC 품질을 확보할 수 있다
```

#### Acceptance Criteria

```gherkin
Feature: TC 결과 리뷰

  Scenario: 생성 결과 요약
    Given TC 생성이 완료되면
    Then 다음 요약 정보가 표시된다:
      - 총 생성 TC 개수
      - 카테고리별 분포 (차트)
      - 플랫폼별 분포
      - 우선순위별 분포

  Scenario: 추가 요청
    Given 결과 리뷰 화면에서
    When "추가 요청" 버튼을 클릭하고
    And "결제 실패 케이스를 더 추가해주세요" 입력하면
    Then AI가 추가 TC를 생성하고
    And 기존 목록에 추가된다

  Scenario: TC 즉석 수정
    Given 결과 리뷰 화면에서
    When 특정 TC를 클릭하면
    Then 인라인 편집 모드가 활성화되고
    And 내용을 수정할 수 있다

  Scenario: TC 삭제
    Given 결과 리뷰 화면에서
    When TC의 삭제 버튼을 클릭하면
    Then 해당 TC가 목록에서 제거된다
```

---

## 4. 사전 설정 템플릿

### 4.1 템플릿 유형

| 템플릿 | 포함 범위 | 예상 TC 규모 |
|-------|----------|-------------|
| **스모크 테스트** | 정상 시나리오만, 핵심 기능 위주 | 소량 (10-20개) |
| **회귀 테스트** | 정상 + 에러 케이스, 모든 기능 | 중량 (50-100개) |
| **릴리즈 전 QA** | 모든 범위, 모든 데이터 유형 | 대량 (100-200개) |
| **보안 테스트** | 보안 집중, 비정상 데이터 | 중량 (30-50개) |
| **접근성 테스트** | 접근성 항목 집중 | 소량 (15-30개) |

### 4.2 템플릿 선택 UI

```gherkin
Feature: 사전 설정 템플릿

  Scenario: 템플릿 선택
    Given Step 3 테스트 범위 선택 화면에서
    When "템플릿 사용" 버튼을 클릭하면
    Then 사전 설정 템플릿 목록이 표시된다

  Scenario: 템플릿 적용
    Given 템플릿 목록에서
    When "회귀 테스트" 템플릿을 선택하면
    Then 해당 템플릿의 모든 옵션이 자동으로 선택된다
    And Step 3-6의 모든 설정이 채워진다

  Scenario: 템플릿 커스터마이징
    Given 템플릿이 적용된 상태에서
    When 일부 옵션을 수정하면
    Then 수정된 설정이 반영된다
    And "커스텀" 표시가 나타난다
```

---

## 5. 실시간 미리보기 UI

### 5.1 미리보기 패널 구성

```
┌─────────────────────────────────────────────────────────────────┐
│  [왼쪽 패널: 질문/선택]          [오른쪽 패널: 실시간 미리보기]   │
├────────────────────────────────┼────────────────────────────────┤
│                                │                                │
│  Step 3: 테스트 범위 선택       │  📊 예상 TC 개수: 47개          │
│                                │                                │
│  로그인 기능:                   │  ┌──────────────────────────┐ │
│  ☑ 정상 시나리오               │  │ 카테고리별 분포           │ │
│  ☑ 에러 케이스                 │  │ ██████████ 기능: 20      │ │
│  ☐ 성능 테스트                 │  │ ██████ 엣지케이스: 15    │ │
│  ☐ 보안 테스트                 │  │ ████ 경계값: 12         │ │
│                                │  └──────────────────────────┘ │
│  회원가입 기능:                 │                                │
│  ☑ 정상 시나리오               │  📝 미리보기 TC (처음 5개)      │
│  ☑ 에러 케이스                 │  ├─ TC-001: 유효한 이메일 로그인│
│  ☑ 성능 테스트                 │  ├─ TC-002: 잘못된 비밀번호    │
│  ☐ 보안 테스트                 │  ├─ TC-003: 소셜 로그인 성공   │
│                                │  ├─ TC-004: 세션 만료 처리     │
│  [이전] [다음]                 │  └─ TC-005: 동시 로그인 제한   │
│                                │                                │
└────────────────────────────────┴────────────────────────────────┘
```

### 5.2 미리보기 업데이트 로직

```
사용자 옵션 변경
       ↓
옵션 변경 감지 (debounce 300ms)
       ↓
예상 TC 개수 계산 (클라이언트)
       ↓
미리보기 TC 샘플 생성 (서버, optional)
       ↓
UI 업데이트
```

---

## 6. 기술 요구사항

### 6.1 프론트엔드

- **Wizard 컴포넌트**: 단계별 진행 UI
- **드래그앤드롭**: dnd-kit 또는 react-beautiful-dnd
- **실시간 업데이트**: React Query + WebSocket
- **차트**: Recharts 또는 Chart.js

### 6.2 백엔드

- **세션 상태 관리**: Redis 또는 Supabase Realtime
- **TC 생성 스트리밍**: Server-Sent Events
- **템플릿 저장**: JSON 기반 설정 저장

### 6.3 AI

- **프롬프트 엔지니어링**: 사용자 선택 기반 동적 프롬프트
- **부정적 TC 생성**: 원본 TC 기반 반대 시나리오 생성
- **경계값 분석**: 입력 필드 스키마 기반 자동 생성

---

## 7. 우선순위

| 기능 | 우선순위 | 비고 |
|-----|---------|------|
| Wizard UI 기반 단계 진행 | P0 (MVP) | 핵심 |
| 기능 편집 UI (드래그앤드롭) | P0 (MVP) | 핵심 |
| 테스트 범위 선택 | P0 (MVP) | 핵심 |
| 실시간 TC 개수 미리보기 | P0 (MVP) | 핵심 |
| 데이터 관점 질문 | P0 (MVP) | 합의 신규 |
| 사용자 페르소나 선택 | P1 | 합의 신규 |
| 사전 설정 템플릿 | P1 | 합의 신규 |
| PRD 분석 시각화 (하이라이팅) | P1 | 합의 신규 |
| TC 샘플 미리보기 | P2 | 선택적 |

---

*Document generated based on Claude-Gemini Consensus*
*Version: 1.0*
*Date: 2026-01-16*

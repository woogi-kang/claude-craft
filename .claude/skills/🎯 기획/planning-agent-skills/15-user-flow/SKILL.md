---
name: plan-user-flow
description: |
  사용자 플로우를 설계하는 스킬.
  핵심 시나리오별 플로우 다이어그램을 작성합니다.
triggers:
  - "사용자 플로우"
  - "User Flow"
  - "플로우 다이어그램"
  - "시나리오 플로우"
input:
  - feature-spec.md 결과
  - information-architecture.md 결과
output:
  - 04-specification/user-flow.md
---

# User Flow Skill

핵심 사용자 시나리오의 플로우를 설계합니다.
단계별 화면, 액션, 분기점을 시각화합니다.

## 출력 템플릿

```markdown
# {Project Name} - 사용자 플로우

## 1. 플로우 Overview

### 핵심 플로우 목록

| # | 플로우 | 사용자 | 목표 | 우선순위 |
|---|--------|--------|------|----------|
| 1 | {flow_1} | {user} | {goal} | 🔴 Must |
| 2 | {flow_2} | {user} | {goal} | 🔴 Must |
| 3 | {flow_3} | {user} | {goal} | 🟡 Should |
| 4 | {flow_4} | {user} | {goal} | 🟢 Could |

### 플로우 다이어그램 범례

```
[화면]     : 사용자가 보는 페이지/화면
(액션)     : 사용자의 행동
<결정>     : 시스템 판단/분기
{상태}     : 데이터/상태 변경
→          : 다음 단계
─┬─        : 분기
│          : 연결
```

---

## 2. Flow 1: {Flow Name}

### 개요

| 항목 | 내용 |
|------|------|
| 목적 | {purpose} |
| 시작점 | {entry_point} |
| 종료점 | {exit_point} |
| 사용자 | {user_type} |
| 예상 소요 시간 | {duration} |

### Happy Path

```
┌──────────────────────────────────────────────────────────────────────┐
│                                                                       │
│   [시작]                                                              │
│      │                                                                │
│      ▼                                                                │
│   [화면 1: {Screen Name}]                                             │
│      │                                                                │
│      ▼                                                                │
│   (액션: {User Action})                                               │
│      │                                                                │
│      ▼                                                                │
│   <조건: {Condition}>                                                 │
│      │                                                                │
│      ├── Yes ─────────────────────────┐                              │
│      │                                 │                              │
│      │   [화면 2: {Screen Name}]       │                              │
│      │      │                          │                              │
│      │      ▼                          │                              │
│      │   (액션: {User Action})         │                              │
│      │      │                          │                              │
│      │      ▼                          │                              │
│      │   {상태: {State Change}}        │                              │
│      │      │                          │                              │
│      │      ▼                          │                              │
│      │   [화면 3: {Success Screen}]    │                              │
│      │      │                          │                              │
│      │      ▼                          │                              │
│      │   [완료]                        │                              │
│      │                                 │                              │
│      └── No ──────────────────────────┘                              │
│             │                                                         │
│             ▼                                                         │
│          [에러 화면]                                                   │
│             │                                                         │
│             ▼                                                         │
│          [화면 1로 복귀]                                               │
│                                                                       │
└──────────────────────────────────────────────────────────────────────┘
```

### 단계별 상세

| Step | 화면 | 사용자 액션 | 시스템 응답 | 다음 단계 |
|------|------|-----------|-----------|----------|
| 1 | {screen_1} | {action_1} | {response_1} | Step 2 |
| 2 | {screen_2} | {action_2} | {response_2} | Step 3 |
| 3 | {screen_3} | {action_3} | {response_3} | 완료 |

### 분기 시나리오

| 분기점 | 조건 | 경로 A | 경로 B |
|--------|------|--------|--------|
| {branch_1} | {condition} | {path_a} | {path_b} |
| {branch_2} | {condition} | {path_a} | {path_b} |

### 에러 케이스

| 에러 | 발생 시점 | 처리 | 사용자 메시지 |
|------|----------|------|-------------|
| {error_1} | Step {n} | {handling} | "{message}" |
| {error_2} | Step {n} | {handling} | "{message}" |

### 관련 화면 목록

| 화면 | URL | 와이어프레임 |
|------|-----|-------------|
| {screen_1} | {url} | wireframe-guide.md #{ref} |
| {screen_2} | {url} | wireframe-guide.md #{ref} |

---

## 3. Flow 2: {Flow Name}

### 개요

| 항목 | 내용 |
|------|------|
| 목적 | {purpose} |
| 시작점 | {entry_point} |
| 종료점 | {exit_point} |
| 사용자 | {user_type} |

### 플로우 다이어그램

```
[시작: {Entry}]
      │
      ▼
[{Screen 1}] ◄──────────────────┐
      │                          │
      ▼                          │
({Action 1})                     │
      │                          │
      ▼                          │
<{Validation}?>                  │
      │                          │
      ├── Valid                  │
      │      │                   │
      │      ▼                   │
      │   [{Screen 2}]           │
      │      │                   │
      │      ▼                   │
      │   ({Action 2})           │
      │      │                   │
      │      ▼                   │
      │   {Save Data}            │
      │      │                   │
      │      ▼                   │
      │   [Success]              │
      │                          │
      └── Invalid ───────────────┘
           Show Error
```

### 단계별 상세

(동일 구조)

---

## 4. Flow 3: {Flow Name}

(동일 구조)

---

## 5. 플로우 간 연결

### 플로우 관계도

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                  │
│   [회원가입] ──────────► [온보딩] ──────────► [대시보드]          │
│       │                     │                    │               │
│       │                     │                    │               │
│       ▼                     ▼                    ▼               │
│   [로그인] ◄───────────────┴──────────────► [{Core Flow}]       │
│       │                                          │               │
│       │                                          │               │
│       ▼                                          ▼               │
│   [비밀번호 찾기]                            [설정]              │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 진입점 (Entry Points)

| 진입점 | 소스 | 목적지 플로우 |
|--------|------|--------------|
| 직접 URL | {url} | {flow} |
| 이메일 링크 | 이메일 | {flow} |
| 푸시 알림 | 앱 | {flow} |
| 검색 결과 | 구글 | {flow} |

### 이탈점 (Exit Points)

| 플로우 | 이탈점 | 다음 목적지 |
|--------|--------|------------|
| {flow_1} | 완료 | {destination} |
| {flow_1} | 취소 | {destination} |
| {flow_1} | 에러 | {destination} |

---

## 6. 상태 전이 (State Transitions)

### 사용자 상태

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                  │
│   [Anonymous]                                                    │
│       │                                                          │
│       │ 회원가입                                                  │
│       ▼                                                          │
│   [Registered]                                                   │
│       │                                                          │
│       │ 온보딩 완료                                               │
│       ▼                                                          │
│   [Active]                                                       │
│       │                                                          │
│       ├─── 구독 ───► [Premium]                                   │
│       │                                                          │
│       └─── 비활성 ───► [Inactive] ───► [Churned]                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 데이터 상태 (예: 주문)

```
[Draft] → [Submitted] → [Processing] → [Completed]
                │              │
                │              └───► [Failed]
                │
                └───► [Cancelled]
```

---

## 7. 플로우 최적화 메모

### 마찰 포인트 (Friction Points)

| 플로우 | 단계 | 마찰 | 개선 방안 |
|--------|------|------|----------|
| {flow_1} | Step {n} | {friction} | {improvement} |
| {flow_2} | Step {n} | {friction} | {improvement} |

### 드롭오프 예상 지점

| 플로우 | 단계 | 예상 이탈률 | 이유 |
|--------|------|------------|------|
| {flow_1} | Step {n} | {rate}% | {reason} |
| {flow_2} | Step {n} | {rate}% | {reason} |

### A/B 테스트 후보

| 플로우 | 테스트 항목 | 가설 |
|--------|-----------|------|
| {flow_1} | {test_item} | {hypothesis} |
| {flow_2} | {test_item} | {hypothesis} |

---

## 8. 접근성 고려사항

### 플로우별 접근성

| 플로우 | 키보드 네비게이션 | 스크린 리더 | 에러 안내 |
|--------|-----------------|------------|----------|
| {flow_1} | {support} | {support} | {support} |
| {flow_2} | {support} | {support} | {support} |

---

## 9. 체크리스트

### 플로우 완성도 체크

| 플로우 | Happy Path | 에러 케이스 | 분기 | 상태 |
|--------|-----------|-----------|------|------|
| {flow_1} | ✅ | ✅ | ✅ | 🟢 |
| {flow_2} | ✅ | 🟡 | ✅ | 🟡 |
| {flow_3} | ✅ | ❌ | ✅ | 🔴 |

---

*다음 단계: Wireframe Guide → Data Strategy*
```

## 플로우 작성 팁

### 좋은 플로우

```
✅ Happy Path 먼저
✅ 분기점 명확
✅ 에러 케이스 포함
✅ 실제 화면과 매핑
```

### 나쁜 플로우

```
❌ 너무 추상적
❌ 에러 케이스 누락
❌ 분기 조건 불명확
❌ 시스템 관점만 (사용자 관점 X)
```

## 퀄리티 체크리스트

```
□ 모든 핵심 플로우가 정의되었는가?
□ Happy Path가 명확한가?
□ 에러 케이스가 정의되었는가?
□ 분기 조건이 명확한가?
□ 화면과 매핑되었는가?
□ 상태 전이가 정의되었는가?
□ 접근성이 고려되었는가?
```

## 🎯 인터랙티브 가이드

### 작성 전 확인 질문

**Q1. 핵심 플로우를 정의했나요?**
- 정의함 → 플로우별 상세 설계 진행
- 안 함 → "사용자가 가장 자주 하는 행동 3가지는 무엇인가요?"

**Q2. Happy Path가 명확한가요?**
- 명확함 → 에러/예외 케이스 추가
- 불명확 → "이상적인 사용자 여정을 먼저 그려보세요"

**Q3. 시스템 상태 전이가 정의되었나요?**
- 정의됨 → 상태별 화면 매핑
- 안 됨 → "각 화면에서 가능한 다음 액션은 무엇인가요?"

### 의사결정 포인트

| 시점 | 확인 내용 | 사용자 프롬프트 |
|------|----------|----------------|
| 플로우 선정 | 우선순위 | "가장 중요한 플로우 3개는?" |
| 분기 설계 | 조건 명확성 | "어떤 조건에서 분기가 발생하나요?" |
| 에러 처리 | 사용자 경험 | "에러 발생 시 사용자에게 뭘 보여주나요?" |
| 완성도 | 테스트 | "모든 경로를 직접 따라가봤나요?" |

---

## 다음 스킬 연결

User Flow 완료 후:

1. **화면 설계** → Wireframe Guide Skill
2. **데이터 설계** → Data Strategy Skill
3. **개발 착수** → Tech Stack Skill

---

*플로우는 기획의 뼈대입니다. 잘 설계된 플로우가 좋은 UX를 만듭니다.*
